<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>Gu√≠a multitenant</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Gu√≠a multitenant</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Esta gu√≠a es un <strong>complemento a la gu√≠a de usuario</strong>. Donde se repasar√°n los aspectos diferenciadores de un modo especial de funcionamiento del WAT: El <strong>modo multitenant</strong>, respecto al modo normal, o tambi√©n llamado <strong>modo monotenant</strong>.</p></div>
<div class="paragraph"><p>Con la gu√≠a multitenant se describe tanto a nivel conceptual como funcional todo lo necesario para poder utilizar este modo avanzado, siempre tomando como base la gu√≠a de usuario. Ambas gu√≠as <strong>no son idependientes</strong>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_modos_de_funcionamiento_por_√°mbito">1. Modos de funcionamiento por √°mbito</h2>
<div class="sectionbody">
<div class="paragraph"><p>El WAT tiene dos modos de funcionamiento:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Monotenant</strong>: Todos los administradores del sistema conviven en un mismo √°mbito o tenant. Este modo de funcionamiento ser√≠a el equivalente a c√≥mo funcionaba el WAT en versiones anteriores a QVD 4.
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Un sistema por defecto es monotenant. Viene creado un usuario administrador con el que tenemos acceso total y con √©l podremos crear elementos de QVD y a otros administradores con los permisos m√°s o menos limitados para gestionar diferentes partes del WAT.</p></div>
<div class="paragraph"><p>Estos permisos har√°n referencia a qu√© elementos ver o gestionar (Usuarios, M√°quinas virtuales, etc.) pero no a podr√°n dar acceso sobre un subconjunto de los mismos.</p></div>
<div class="literalblock">
<div class="content">
<pre><code>Por ejemplo, si a un administrador le damos permisos de lectura sobre las im√°genes de disco, podr√° ver todas las im√°genes del sistema, no podremos limitarlo a un subconjunto de ellas.</code></pre>
</div></div>
<div class="paragraph"><p>Este tipo de disgregaci√≥n se realizar√° en el modo multitenant.</p></div>
</div></div>
</li>
<li>
<p>
<strong>Multitenant</strong>: Podr√°n existir diferentes √°mbitos o tenants. En ellos, se podr√°n crear elementos de QVD independientes entre s√≠ y administradores que los gestionen. En este caso <strong>cada tenant se comportar√° como una instalaci√≥n de WAT monotenant</strong>, pudiendo otorgar a los administradores permisos para poder gestionar m√°s o menos elementos con mayor o menor control.
</p>
<div class="openblock">
<div class="content">
<div class="literalblock">
<div class="content">
<pre><code>Por ejemplo, a un administrador se le podr√°n asignar permisos de lectura sobre im√°genes de disco, con el que solo podr√° ver las que haya en su tenant, y un nivel m√°s avanzado de gesti√≥n en m√°quinas virtuales, con el que podr√°, adem√°s de visualizar, crear y actualizar las m√°quinas virtuales a las que tenga acceso (las de su tenant).</code></pre>
</div></div>
<div class="paragraph"><p>Los administradores de un tenant estar√°n <strong>aislados en su tenant</strong>, sin que sepan que existen otros √°mbitos. Solo ver√°n los elementos de QVD que hay en ese tenant. El administrador ni siquiera ser√° consciente de si est√° trabajando en un WAT monotenant o en un tenant dentro de un WAT multitenant.</p></div>
<div class="paragraph"><p>En un WAT multitenant, existir√° un <strong>√°mbito superior</strong> al que denominaremos <strong>Supertenant √≥ Tenant <em></strong></em>* que englobar√° a todos los dem√°s. Los administradores de este Supertenant est√°n pensados para tareas de <strong>configuraci√≥n y supervisi√≥n</strong> ya que podr√°n gestionar elementos de QVD de <strong>cualquier tenant</strong> siendo conscientes de la distribuci√≥n, pudiendo filtrar elementos por tenant, o elegir en qu√© tenant crear un determinado elemento.</p></div>
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/Monotenant-Multitenant.png" alt="Monotenant-Multitenant.png" width="600px" />
</span></p></div>
</div></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_cambio_de_modo_monotenant_multitenant">2. Cambio de modo (monotenant ‚Üî multitenant)</h2>
<div class="sectionbody">
<div class="dlist"><dl>
<dt class="hdlist1">
Cambios reversibles
</dt>
<dd>
<p>
Los cambios de modo del WAT son <strong>reversibles</strong>. Se puede cambiar tantas veces como se desee entre modos aunque, para preservar coherencia en los datos, lo recomendable es hacer solamente los cambios estrictamente necesarios.
</p>
</dd>
<dt class="hdlist1">
C√≥mo cambiar de modo
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Para cambiar el modo entre monotenant y multitenant, debemos ir a la secci√≥n de <strong>Gesti√≥n de QVD</strong> en el men√∫ general. Dentro de dicha secci√≥n, en el apartado de <strong>Configuraci√≥n de QVD</strong>, iremos al apartado <em>wat</em> o bien buscaremos en el buscador <em>multitenant</em>.</p></div>
<div class="paragraph"><p>All√≠ encontraremos el token <em>wat.multitenant</em>.  Este token acepta dos valores: 0 para el modo monotenant y 1 para el modo multitenant. Podremos cambiarlo al valor deseado y aplicar el cambio. A partir de este momento, nuestro sistema habr√° cambiado su modo de funcionamiento.</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Cambios seg√∫n tipo de administrador
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Seg√∫n el cambio que realicemos y el tipo de administrador con el que lo hagamos podemos vernos en diferentes situaciones:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Cambio de monotenant a multitenant</strong>: En este caso, al venir de un sistema monotenant, el cambio solo podr√° realizarse con un administrador de tenant con permisos de configuraci√≥n de QVD.
</p>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Al estar en todo momento dentro del tenant en el que exista el administrador que realiza el cambio, no parecer√° haber consecuencias inmediatas tras su aplicaci√≥n. Deberemos cerrar sesi√≥n y autenticarnos con un superadministrador para acceder al supertenant y as√≠ comprobar que el WAT est√° funcionando en modo multitenant. Si es la primera vez que se activa este modo, habr√° un superadministrador creado por defecto. Todo esto viene detallado en el apartado Configuraci√≥n Multitenant del manual.</p></div>
</div></div>
</li>
<li>
<p>
<strong>Cambio de multitenant a monotenant</strong>: Este cambio puede realizarse con dos tipos de administradores: Un un administrador de tenant o un superadministrador. Ambos necesitar√°n permisos de configuraci√≥n de QVD para ello.
</p>
</li>
</ul></div>
</div></div>
</dd>
</dl></div>
<div class="paragraph"><p>Cuando se pasa de multitenant a monotenant, los superadministradores que existan en el sistema <strong>quedar√°n inactivos</strong>. No se borrar√°n por si se desea en alg√∫n momento volver al modo multitenant.</p></div>
<div class="paragraph"><p>De este modo tendremos diferentes comportamientos dependiendo el tipo de administrador con que realicemos el cambio:</p></div>
<div class="openblock">
<div class="content">
<div class="ulist"><ul>
<li>
<p>
<strong>Administrador de tenant</strong>: No observaremos cambios aparentes. Lo que ocurrir√° es que si cerramos sesi√≥n e intentamos auntenticarnos con un superadministrador, el sistema no nos lo permitir√°.
</p>
</li>
<li>
<p>
<strong>Superadministrador</strong>: Debido a que al pasar a modo monotenant los superadministradores pasan a estar inactivos, si realizamos este cambio con un superadministrador, al hacerlo efectivo, se cerrar√° sesi√≥n autom√°ticamente.
</p>
</li>
</ul></div>
</div></div>
<div class="paragraph"><p>Cambiando de multitenant a monotenant existe el peligro de perder el modo monotenant. Ver la secci√≥n <em>Situaciones de bloqueo</em> en el manual.</p></div>
<div class="openblock">
<div class="content">
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_supertenant">3. Supertenant</h2>
<div class="sectionbody">
<div class="paragraph"><p>Al cambiar el modo a multitenant (Ver secci√≥n <em>Cambio de modo</em> en el manual), podremos iniciar sesi√≥n con un superadministrador. De este modo gestionaremos el supertenant * que es el √°mbito de los superadministradores, as√≠ como todos los tenants del sistema.</p></div>
<div class="paragraph"><p>El supertenant * es como si fuera un tenant m√°s a efectos de configuraci√≥n del WAT. Se pueden crear administradores en √©l con permisos m√°s o menos restringidos. Pero a diferencia de los tenants, <strong>no podr√° albergar elementos de QVD</strong> (M√°quinas virtuales, usuarios, im√°genes de disco&#8230;).</p></div>
<div class="paragraph"><p>La otra diferencia principal respecto a los tenants es que los administradores del supertenant o superadministradores, tienen como <strong>√°mbito</strong>, no solo el supertenant, sino <strong>todos los tenants del sistema</strong>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_interfaz_multitenant">4. Interfaz multitenant</h2>
<div class="sectionbody">
<div class="paragraph"><p>Cuando iniciamos sesi√≥n con un superadministrador, la interfaz del WAT es pr√°cticamente id√©ntica a la de un administrador de tenant normal salvo por algunas diferencias:</p></div>
<div class="ulist"><ul>
<li>
<p>
En los elementos que son contenidos en los tenants, aparecer√° una <strong>columna extra indicando el tenant</strong> al que pertenecen. En el caso del listado de administradores, como caso particular, el tenant al que pertenece puede ser adem√°s el supertenant *.
</p>
</li>
<li>
<p>
En las vistas de listado de elementos clasificados por tenant, aparece un <strong>control de filtrado extra para filtrar por tenant</strong>. Como excepciones tenemos las vistas de listado de tenants,  nodos y administradores.
</p>
</li>
<li>
<p>
Cuando creamos un elemento en QVD as√≠ como un administrador del WAT, habr√° un <strong>campo extra en el formulario de creaci√≥n</strong> para especificar su tenant. Al igual que dijimos antes, en el caso de los administradores podremos escoger, adem√°s de los tenants, el supertenant *. Esta posibilidad solo est√° en la creaci√≥n de elementos, y no en la edici√≥n. Una vez creado un elemento en un tenant, no podr√° moverse.
</p>
</li>
<li>
<p>
En la secci√≥n <em>Vistas por defecto</em> que se encuentra en el apartado <em>Gesti√≥n del WAT</em> aparece un nuevo control de Tenant. Se pueden configurar las vistas del mismo modo que en Monotenant pero por cada Tenant.
</p>
</li>
<li>
<p>
Existen <strong>permisos adicionales</strong> como son los de gesti√≥n de tenants. De ese modo, podr√° aparecer (si el superadministrador posee dichos permisos) <strong>un apartado m√°s: Tenants</strong>.
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_wat_multitenant_paso_a_paso">5. WAT multitenant paso a paso</h2>
<div class="sectionbody">
<div class="paragraph"><p>Veremos paso a paso las secciones o <strong>componentes que se a√±aden al WAT cuando activamos el modo multitenant</strong>. Estos cambios van desde la pantalla de inicio de sesi√≥n hasta peque√±as modificaciones en las vistas gen√©ricas de listado o creaci√≥n de elementos. Tambi√©n podr√° aparecer alguna secci√≥n nueva si estamos en este modo.</p></div>
<div class="paragraph"><p>Estos cambios aparecer√°n <strong>solo para superadministradores</strong> que tengan los permisos adecuados para ello. <strong>Los administradores de tenant no ver√°n ninguna diferencia</strong> con el modo monotenant, salvo una pantalla de inicio de sesi√≥n diferente.</p></div>
<div class="sect2">
<h3 id="_p√°gina_de_inicio_de_sesi√≥n_multitenant">5.1. P√°gina de inicio de sesi√≥n (multitenant)</h3>
<div class="paragraph"><p>Cuando cargamos el WAT, est√° configurado en modo multitenant, la pantalla de inicio de sesi√≥n tendr√° el campo <em>tenant</em> adem√°s de <em>usuario y contrase√±a</em>. Esto es debido a que el nombre de un administrador puede repetirse en diferentes Tenants. En el caso de los superadministradores, se pondr√° * en el campo Tenant.</p></div>
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/login_multitenant.png" alt="login_multitenant.png" width="960px" />
</span></p></div>
</div>
<div class="sect2">
<h3 id="_tenants">5.2. Tenants</h3>
<div class="paragraph"><p>En la secci√≥n <strong>Gestionar WAT</strong> aparecer un apartado m√°s: Tenants. Este apartado se gestionan los tenants del WAT.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Vista listado
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>La vista principal es un listado con los tenants del WAT.
<span class="image">
<img src="images/doc_images/screenshot_tenant_list.png" alt="screenshot_tenant_list.png" width="960px" />
</span></p></div>
</div></div>
</dd>
<dt class="hdlist1">
Columna informativa
</dt>
<dd>
<p>
El listado de tenants no dispone de columna informativa.
</p>
</dd>
<dt class="hdlist1">
Acciones masivas
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/screenshot_tenant_massiveactions.png" alt="screenshot_tenant_massiveactions.png" width="600px" />
</span></p></div>
<div class="paragraph"><p>Las acciones masivas nos dan las siguientes opciones a realizar sobre los tenants seleccionados:</p></div>
<div class="ulist"><ul>
<li>
<p>
Eliminar tenants
</p>
</li>
</ul></div>
</div></div>
</dd>
<dt class="hdlist1">
Creaci√≥n
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/screenshot_tenant_create.png" alt="screenshot_tenant_create.png" width="960px" />
</span></p></div>
<div class="paragraph"><p>Al crear un tenant estableceremos su nombre, idioma y tama√±o de bloque. Al igual que cuando administramos la configuraci√≥n del WAT, los valores de configuraci√≥n de un tenant har√°n de configuraci√≥n del WAT dentro de ese tenant. Los administradores de un tenant, no son conscientes de que existen otros √°mbitos, y tendr√°n lo que para ellos es la configuraci√≥n de WAT, correspondiendo a la configuraci√≥n de su tenant si lo vemos desde el √°mbito superior o supertenant.</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Vista detalle
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/screenshot_tenant_details.png" alt="screenshot_tenant_details.png" width="960px" />
</span></p></div>
<div class="paragraph"><p>Observamos una <strong>cabecera</strong> donde junto al <strong>nombre del tenant</strong> est√°n los <strong>botones para eliminarlo y editarlo</strong>.</p></div>
<div class="paragraph"><p>Bajo esta cabecera hay una <strong>tabla con los atributos del tenant</strong>.</p></div>
<div class="paragraph"><p>En la parte derecha encontramos un cuadro que contiene <strong>los registros de log</strong> del tenant con un bot√≥n de acceso a los detalles del registro, la acci√≥n realizada y el tiempo transcurrido.</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Edici√≥n
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/screenshot_tenant_edit.png" alt="screenshot_tenant_edit.png" width="960px" />
</span></p></div>
<div class="paragraph"><p>Al editar un tenant podremos cambiar el nombre, idoma y tama√±o de bloque, recordando que un administrador de ese tenant con permisos de configuraci√≥n de QVD puede cambiar estos valores exceptuando el nombre, que solo podr√° ser modificado por un superadministrador.</p></div>
</div></div>
</dd>
</dl></div>
</div>
<div class="sect2">
<h3 id="_vistas_por_defecto_multitenant">5.3. Vistas por defecto (multitenant)</h3>
<div class="paragraph"><p>Si estamos en modo multitenant y somos superadministrador, en <em>Vistas por defecto</em> podremos no solo configurar estos elementos en el supertenant, sino que tambi√©n podremos hacerlo para cada uno de los tenants del sistema.</p></div>
<div class="paragraph"><p>Para ello, adem√°s de un combo selector con la secci√≥n que queremos personalizar, aparecer√° otro combo de selecci√≥n con el tenant al que afectar√° esta configuraci√≥n.</p></div>
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/default_views_multitenant.png" alt="default_views_multitenant.png" width="960px" />
</span></p></div>
<div class="paragraph"><p>A la hora de reestablecer las vistas por defecto, tambi√©n podremos escoger si queremos aplicar esta acci√≥n sobre el tenant cargado en ese momento en la secci√≥n o bien sobre todos los tenants del sistema, incluyendo el supertenant *.</p></div>
<div class="paragraph"><p><span class="image">
<img src="images/doc_images/default_views_multitenant_reset.png" alt="default_views_multitenant_reset.png" width="960px" />
</span></p></div>
<div class="paragraph"><p>Combinando esta opci√≥n con el control en el que elegimos si aplicar la acci√≥n sobre la secci√≥n actual o todas, tenemos diferentes posibilidades:</p></div>
<div class="ulist"><ul>
<li>
<p>
Reestablecer las vistas de la secci√≥n y tenant cargados en ese momento
</p>
</li>
<li>
<p>
Reestablecer las vistas de la secci√≥n cargada en todos los tenants del sistema
</p>
</li>
<li>
<p>
Reestablecer las vistas del tenant cargado para todas las secciones
</p>
</li>
<li>
<p>
Reestablecer las vistas de todas las secciones en todos los tenants del sistema
</p>
</li>
</ul></div>
</div>
<div class="sect2">
<h3 id="_documentaci√≥n_multitenant">5.4. Documentaci√≥n (multitenant)</h3>
<div class="paragraph"><p>Si estamos en modo multitenant y somos superadministrador, en <em>Documentaci√≥n</em> encontraremos una gu√≠a m√°s:</p></div>
<div class="ulist"><ul>
<li>
<p>
La <strong>gu√≠a multitenant</strong> donde encontraremos, por una parte una descripci√≥n te√≥rica del funcionamiento del sistema multitenant y por otro las diferencias tanto funcionales como de interfaz respecto al modo monotenant.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Adem√°s, en los enlaces de documentaci√≥n relacionada situados bajo las diferentes secciones, podremos encontrar enlaces adicionales con acceso a la parte correspondiente de dicha secci√≥n desde el punto de vista multitenant.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_primeros_pasos_multitenant">6. Primeros pasos multitenant</h2>
<div class="sectionbody">
<div class="paragraph"><p>Si es la primera vez que activamos el modo multitenant, podremos iniciar sesi√≥n con el superadministrador que viene por defecto en el sistema. Sus credenciales son:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>Usuario: superadmin
Contrase√±a: superadmin</code></pre>
</div></div>
<div class="paragraph"><p>Lo primero que haremos ser√° <strong>cambiar la contrase√±a</strong>.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Poderes de <em>superadmin</em>
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Este administrador tendr√° poderes totales sobre el sistema. Si deseamos tener superadministradores menos poderosos, podremos gestionarlos con √©l o con cualquier superadministrador creado en el sistema con los suficientes permisos. Para saber m√°s ver secci√≥n <em>Configuraci√≥n de administradores</em> en el manual.</p></div>
</div></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_gestionar_administradores_y_permisos_multitenant">7. Gestionar Administradores y Permisos (multitenant)</h2>
<div class="sectionbody">
<div class="paragraph"><p>En entornos multitenant hay algunas cosas que debemos saber cuando gestionamos los administradores y sus permisos.</p></div>
<div class="paragraph"><p>Las diferencias en la interfaz y en su gesti√≥n que comentaremos a continuaci√≥n solamente aparecer√°n para los superadministradores.</p></div>
<div class="paragraph"><p>Aunque un entorno sea multitenant, para los administradores de un tenant, esta condici√≥n es transparente. Para ellos, no habr√° diferencia con un entorno monotenant.</p></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Independencia de roles
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Los roles son independientes a los tenants. Lo que es lo mismo, son comunes a todos ellos. Por ello, en la vista listado de roles no se observar√°n cambios respecto al modo monotenant.</p></div>
</div></div>
</dd>
<dt class="hdlist1">
ACLs adicionales
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Algunos ACLs son exclusivos de entornos multitenant. Este es el caso de los ACLs responsables de la gesti√≥n de Tenants.</p></div>
<div class="paragraph"><p>Dichos ACLs ser√°n inexistentes en sistemas monotenant. De esta manera, en la gesti√≥n de roles as√≠ como cuando gestionemos administradores en un entorno multitenant, los √°rboles de ACLs tendr√°n ciertos ACLs extras adem√°s de los mismos que habr√° en el caso de monotenant.</p></div>
</div></div>
</dd>
<dt class="hdlist1">
Distribuci√≥n de administradores por tenants
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>En un entorno multitenant, <strong>los administradores estar√°n alojados inequ√≠vocamente en un tenant</strong>, bien sea un tenant normal o el supertenant en el caso de los superadministradores.</p></div>
<div class="paragraph"><p>Atendiendo a la creaci√≥n de un administrador, distinguimos <strong>dos casos en funci√≥n del √°mbito</strong>:</p></div>
</div></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Un administrador de tenant</strong> podr√° ser creado por un administrador de su mismo tenant y por un superadministrador.
</p>
</li>
<li>
<p>
<strong>Un superadministrador podr√° ser creado por otro superadministrador</strong>.
</p>
</li>
</ul></div>
</dd>
</dl></div>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>Al crear un administrador, si estamos en un entorno multitenant y somos superadministradores, aparecer√° un campo para escoger en que tenant queremos crearlo. <strong>El administrador no podr√° ser movido de tenant una vez creado</strong>.</p></div>
<div class="paragraph"><p>En la vista listado de administradores figurar√° en una <strong>columna extra</strong> el tenant al que pertenece cada administrador, y adem√°s un <strong>nuevo control de filtrado</strong> nos ayudar√° a ver solamente los administradores del tenant que elijamos.</p></div>
</div></div>
<div class="dlist"><dl>
<dt class="hdlist1">
Gesti√≥n de tenants
</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph"><p>En los entornos multitenant se introduce la gesti√≥n de tenants.</p></div>
<div class="paragraph"><p>Podemos crear tantos tenants como queramos, sin l√≠mite de administradores por tenant.</p></div>
<div class="paragraph"><p>Al crear un tenant definiremos su nombre, el idioma y el tama√±o de bloque del WAT por defecto para sus administradores.</p></div>
<div class="paragraph"><p>El proceso ser√°:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Crear el tenant con el bot√≥n ‚ÄúNuevo tenant‚Äù</strong> de la vista listado de tenants. Definiremos su nombre, el idioma y el tama√±o de bloque del WAT por defecto para sus administradores.
</p>
</li>
<li>
<p>
La gesti√≥n de un tenant no va m√°s all√° de modificar dichos par√°metros o eliminar el tenant como cualquier otro elemento en el WAT. <strong>Si eliminamos un tenant se eliminar√° todo su contenido</strong>, as√≠ que es una acci√≥n bastante delicada y por lo tanto cr√≠tica.
</p>
</li>
</ul></div>
</div></div>
</dd>
</dl></div>
</div>
</div>
<div class="sect1">
<h2 id="_situaciones_de_bloqueo_multitenant">8. Situaciones de bloqueo (multitenant)</h2>
<div class="sectionbody">
<div class="paragraph"><p>En un sistema multitenant, surgen nuevas formas de entrar en una situaci√≥n de bloqueo. Aunque en los tenants tengamos los administradores bien configurados, puede que en en el supertenant <strong>perdamos por descuido el control del √∫nico superadministrador que pueda gestionar los permisos</strong>, por lo que perder√≠amos funcionalidades.</p></div>
<div class="paragraph"><p>Otra nueva situaci√≥n de bloqueo puede ocurrir <strong>al cambiar de modo multitenant a monotenant</strong>.</p></div>
<div class="paragraph"><p>Ocurrir√° si cambiamos el modo multitenant a monotenant en el caso en que no exista ning√∫n administrador de tenant con capacidad para volver a poner el sistema en modo multitenant ni para otorgar dichos permisos a otro administrador (o a s√≠ mismo).</p></div>
<div class="paragraph"><p>En este caso quedar√≠amos atrapados en el modo monotenant, lo que tambi√©n consideramos situaci√≥n de bloqueo.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_modo_de_recuperaci√≥n_multitenant">9. Modo de recuperaci√≥n (multitenant)</h2>
<div class="sectionbody">
<div class="paragraph"><p>En una configuraci√≥n multitenant tambi√©n existir√° el administrador de recuperaci√≥n con las mismas credenciales que en monotenant:</p></div>
<div class="literalblock">
<div class="content">
<pre><code>Usuario: batman
Contrase√±a: to the rescue</code></pre>
</div></div>
<div class="paragraph"><p>En este caso tendr√° ligeras diferencias con el que tendremos en modo monotenant.</p></div>
<div class="paragraph"><p>B√°sicamente <strong>la diferencia ser√°</strong>, que en este modo, <strong>el administrador de recuperaci√≥n tendr√°</strong>, adem√°s de los que tiene en modo monotenant, <strong>acceso a gesti√≥n de Tenants</strong>.</p></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-03-12 10:43:29 CET
</div>
</div>
</body>
</html>
